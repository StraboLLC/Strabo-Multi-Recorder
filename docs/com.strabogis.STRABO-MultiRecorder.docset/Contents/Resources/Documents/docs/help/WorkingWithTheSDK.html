<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="Content-Type" content="html/html; charset=utf-8" />
		<title>WorkingWithTheSDK Document</title>
		<meta id="xcode-display" name="xcode-display" content="render"/>
		<meta name="viewport" content="width=550" />
		<link rel="stylesheet" type="text/css" href="../../css/styles.css" media="all" />
		<link rel="stylesheet" type="text/css" media="print" href="../../css/stylesPrint.css" />	
		<meta name="generator" content="appledoc 2.0.5 (build 789)" />
	</head>
	<body>
		<header id="top_header">
			<div id="library" class="hideInXcode">
				<h1><a id="libraryTitle" href="../index.html">STRABO-MultiRecorder </a></h1>
				<a id="developerHome" href="../index.html">Strabo, LLC</a>
			</div>
			
			<div id="title" role="banner">
				<h1 class="hideInXcode" id="pageTitleHeader">WorkingWithTheSDK Document</h1>
			</div>
			<ul id="headerButtons" role="toolbar"></ul>
		</header>
		<article>
			<a title="WorkingWithTheSDK Document" name="top"></a>
			<div id="overview_contents" role="main">
				<div id="container">	
					<h1>Working With the SDK</h1>

<p>If you have not downloaded the SDK yet, see &ldquo;<a href="../../docs/help/GettingTheSDK.html">Getting the SDK</a>&rdquo;.</p>

<p>If you have downloaded and implemented the SDK, at some point in your application you will undoubtedly want to display the view to capture a video or image using the Strabo capture geo-tagging technique. This guide will walk you through the steps to present the capture view, dismiss the capture view, and then access the files that may have been captured.</p>

<p>Contents of this guide:</p>

<ol>
<li><a href="#section1">Presenting the Capture View Controller</a></li>
<li><a href="#section2">Accessing Local Captures</a></li>
<li><a href="#section3">Uploading a Capture</a></li>
</ol>


<p><a name="section1"></a></p>

<h2>Presenting the Capture View Controller</h2>

<p>The custom capture view controller is similar in appearance to Apple&rsquo;s native capture application. You present the capture view, an instance of a <a href="../../Classes/STRCaptureViewController.html">STRCaptureViewController</a>, modally and then dismiss it when the user is done taking pictures or video.</p>

<p>Prepare the view controller that will present the <a href="../../Classes/STRCaptureViewController.html">STRCaptureViewController</a> as follows:</p>

<p>In your header file, import the sdk header file. This will ensure that you have access to all of the classes that you might decide to implement.</p>

<pre><code>#import "multi-recorder-sdk.h"
</code></pre>

<p>Alternatively, if you are a pro, you could just include the files that you know you will need:</p>

<pre><code>#import "StraboCaptureViewController.h"
</code></pre>

<p>Your view controller should also serve as a <a href="../../Protocols/STRCaptureViewControllerDelegate.html">STRCaptureViewControllerDelegate</a>. That means that it needs to implement at least the required delegate methods. See the documentation for <a href="../../Protocols/STRCaptureViewControllerDelegate.html">STRCaptureViewControllerDelegate</a> for more details.</p>

<p>In many examples, the capture view will need to be presented when the user taps a button. For this reason, in my example, I will include the code to display the capture view as if it is hooked up to a button in a Storyboard file.</p>

<p>In total, your .h file might look similar to the following:</p>

<pre><code>//
// FirstViewController.h
// Created by Nate Beatty
// Copyright (c) 2012 Strabo, LLC

#import &lt;UIKit/UIKit.h&gt;
#import "multi-recorder-sdk.h"

@interface FirstViewController : UIViewController &lt; STRCaptureViewControllerDelegate &gt; {

}

// Button handling (buttons from storyboard)

-(IBAction)cameraButtonWasPressed;

// STRCaptureViewControllerDelegate methods

-(void)parentShouldDismissCaptureViewController:(UIViewController *)sender;

@end
</code></pre>

<p>In your .m file, you should include the code to initialize a new <a href="../../Classes/STRCaptureViewController.html">STRCaptureViewController</a> and present it modally when necessary. In this case, we will put this code in the method that is called when the camera button is pressed. The method cameraButtonWasPressed should look like this:</p>

<pre><code>-(IBAction)cameraButtonWasPressed {
    // Create a new instance of a STRCaptureViewController
    STRCaptureViewController * captureVC = [STRCaptureViewController captureManager];
    // Assign the delegate to be self
    captureVC.delegate = self;
    // Present modally
    [self presentViewController:cameraVC animated:YES completion:nil];
}
</code></pre>

<p>As discussed above, we will need a complete implementation of the delegate method, <a href="[STRCaptureViewControllerDelegate](../../Protocols/STRCaptureViewControllerDelegate.html">parentShouldDismissCaptureViewController:</a> parentShouldDismissCaptureViewController:). This method should look something like this:</p>

<pre><code>-(void)parentShouldDismissCaptureViewController:(UIViewController *)sender {
    [sender dismissViewControllerAnimated:YES completion:nil];
}
</code></pre>

<p><a name="section2"></a></p>

<h2>Accessing Local Captures</h2>

<p>Local captures are accessed using a <a href="../../Classes/STRCaptureFileManager.html">STRCaptureFileManger</a>.</p>

<p><strong><em> STUB </em></strong></p>

<p><a name="section3"></a></p>

<h2>Uploading a Capture</h2>

<p>This SDK provides an object to help you upload captures to the Strabo server for later playback and handling on the web. Strabo will handle the storage of the video and you are responsible for keeping track of how videos are associated with users, etc. The following section of the guide walks you through how to use a <a href="../../Classes/STRCaptureFileManager.html">STRCaptureFileManager</a> to handle an upload and how to keep track of uploaded videos for later integration with the <a href="http://api.strabo.co/">web api</a>.</p>

<p>To upload a capture, you will need to do the following:</p>

<ol>
<li><a href="#section3.1">Create a STRCapture Object</a></li>
<li><a href="#section3.2">Instantiate a STRCaptureUploadManager</a></li>
<li><a href="#section3.3">Upload the Capture Object</a></li>
<li><a href="#section3.4">Handle the Upload Appropriately</a></li>
</ol>


<p><a name="section3.1"></a></p>

<h3>Create a <a href="../../Classes/STRCapture.html">STRCapture</a> Object</h3>

<p>If you wish to upload a capture to the Strabo server, you will first need to create a <a href="../../Classes/STRCapture.html">STRCapture</a> object for the relevant capture. Most practically, this should be done with a <a href="../../Classes/STRCaptureFileManager.html">STRCaptureFileManager</a> object, as described in <a href="#section2">Accessing Local Captures</a>. This is the recommended method.</p>

<p>Alternatively, if you are programming at a lower level of abstraction and know the subdirectory path of the capture within the capture file system, you can instantiate a STRCapture object directly by using the <a href="[STRCapture%20captureFromFilesAtDirectory:]">captureFromFilesAtDirectory:</a> class method. This is not recommended, particularly if you do not have access to the source files and are familiar with the file storage system and structures.</p>

<p><a name="section3.2"></a></p>

<h3>Instantiate a <a href="../../Classes/STRCaptureUploadManager.html">STRCaptureUploadManager</a></h3>

<p>Instead of sending a POST request to a server yourself, you can use the <a href="../../Classes/STRCaptureFileManager.html">STRCaptureUploadManager</a> class to do the work for you. Create a new STRCaptureUploadManager by using the <a href="[STRCaptureUploadManager%20defaultManager]">defaultManager</a> class method.</p>

<p><a name="section3.3"></a></p>

<h3>Upload the Capture Object</h3>

<p>Next, you can pass your previously created STRCapture object to the manager using the <a href="../../Classes/STRCaptureUploadManager.html#//api/name/beginUploadForCapture:">[STRCaptureUploadManager beginUploadForCapture:]</a> method. This will start an asynchronous upload to the Strabo servers and will store your capture in the cloud.</p>

<p>Your code will look something like the following:</p>

<pre><code>// Create the capture object
STRCapture * capture = // Create capture object using a STRCaptureFileManager

// Upload the capture
STRCaptureUploadManager * uploadManager = [STRCaptureUploadManager defaultManager];
[uploadManager beginUploadForCapture:capture];
</code></pre>

<p>If at any point you need to cancel the upload, call the <a href="[STRCaptureUploadManager%20cancelCurrentUpload]">cancelCurrentUpload</a> method.</p>

<p>To monitor the upload, you should implement the <a href="../../Protocols/STRCaptureUploadManagerDelegate.html">STRCaptureUploadManagerDelegate</a>. Although all of the methods in this protocol are optional, they will be useful to determine the progress and status of the upload. Implementing the protocol is fairly straightforward &ndash; see the protocol documentation for more information.</p>

<p><a name="section3.4"></a></p>

<h3>Handle the Upload Appropriately</h3>

<p>Because the captures are uploaded to the Strabo servers, you will need to get a reference to the uploaded capture in order to access it via the web API. The <a href="../../Protocols/STRCaptureUploadManagerDelegate.html">STRCaptureUploadManagerDelegate</a> provides a means for you to easily obtain the unique token for a capture upon successful upload. You will need to figure out a way to save this token for later use with the web API. One possible solution is outlined below:</p>

<p><strong><em> STUB </em></strong></p>

<ul>
<li>save token</li>
<li>upload token to server with associated user ID</li>
<li>access database of tokens</li>
</ul>

				</div>
				<div id="footer">
					<hr />
					<div class="footer-copyright">
						<p><span class="copyright">&copy; 2012 Strabo, LLC. All rights reserved. (Last updated: 2012-08-03)</span><br />
						
						<span class="generator">Generated by <a href="http://appledoc.gentlebytes.com">appledoc 2.0.5 (build 789)</a>.</span></p>
						
					
					</div>
				</div>
			</div>
		</article>
	</body>
</html>